<h1> <%= @beer.name %> </h1>
<div class="brewerylink">
  	<%= link_to @beer.brewery.name, @beer.brewery %>
</div>

<p>
  <b>Being served at
  <%= pluralize(@beer.bars.count, "bar") %> </b>
</p>

<p>
  <b>Description:</b>
  <%= @beer.description %>
</p>

<p>
  <b>ABV:</b>
  <%= number_to_percentage @beer.abv, :precision => 1 %> 
</p>

<p>
  <b>Volume:</b>
  <%= @beer.volume %> 
	<% if not @beer.volume.nil? %>
		<%= @beer.volunit %>
	<% end %>
</p>

<div class="itemlist">
<table>
<thead>
  <tr>
    <th width=150>Bar</th>
	<th width=150>Address</th>
    <th width=100>Price</th>
	<th width=100>ABD (oz)</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
</thead>
<tbody>
<% @beer_items.each do |item| %>
  <tr>
    <td><%= link_to item.bar.name, item.bar %></td>
	<td><%= item.bar.address %></td>
    <td><%= number_to_currency(item.price) %></td>
   <% if not item.beer.abv.nil? %>
	<% case @beer.volunit %>
	<% when 'oz' %>
		<td><%= sprintf("%.3f",(@beer.abv*@beer.volume)/(100*item.price)) %> </td>
	<% when 'ml' %>
		<td><%= sprintf("%.3f",(@beer.abv*@beer.volume*0.03381)/(100*item.price)) %> </td>
	<% when 'cl' %>
		<td><%= sprintf("%.3f",(@beer.abv*@beer.volume*0.3381)/(100*item.price)) %> </td>
	<% end %>
   <% else %>
	<td></td>
   <% end %>
    <td><%= link_to 'Show', item %></td>
    <td><%= link_to 'Edit', edit_beer_item_path(item) %></td>
    <td><%= link_to 'Destroy', item, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</tbody>
</table>
</div>


<%= link_to 'Edit', edit_beer_path(@beer) %> |
<%= link_to 'Back', :back %>
